<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Libreria Cristiana Online - Risorse - Chiesa Evangelica [Nome Città]
    </title>
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  <body>
    <header id="main-header"></header>

    <main>
      <section id="page-hero" class="small-hero">
        <div class="container">
          <h1>Libreria Cristiana Online</h1>
          <p>
            Letture per l'anima: Libri, opuscoli e studi biblici per
            l'approfondimento della fede.
          </p>
        </div>
      </section>

      <section id="book-archive" class="container content-section">
        <div class="filter-controls">
          <input
            type="text"
            id="search-bar-books"
            placeholder="Cerca per titolo, autore o tema..."
          />

          <select id="filter-category">
            <option value="all">Tutte le Categorie</option>
            <option value="dottrina">Dottrina Fondamentale</option>
            <option value="vita-cristiana">Vita Cristiana Pratica</option>
            <option value="studio-biblico">Studi per Libri Biblici</option>
            <option value="bambini">Materiale per Bambini</option>
            <option value="testimonianze">Testimonianze</option>
          </select>

          <select id="filter-language">
            <option value="all">Tutte le Lingue</option>
            <option value="ukr">Ucraino</option>
            <option value="rus">Russo</option>
            <option value="ita">Italiano</option>
            <option value="eng">Inglese</option>
          </select>
        </div>

        <div id="books-list" class="books-grid">
          <article class="book-card" data-category="dottrina" data-lang="ukr">
            <img
              src="../immagini/copertina-libro1.jpg"
              alt="Copertina: La Vera Fede"
              class="book-cover"
            />
            <div class="book-info">
              <h3>La Vera Fede</h3>
              <p class="book-author">Autore: [Nome Autore]</p>
              <p class="book-details">
                **Lingua:** Ucraino | **Formato:** PDF | **Categoria:** Dottrina
              </p>
              <p class="book-description">
                Una guida essenziale ai principi fondamentali del Cristianesimo
                Evangelico.
              </p>
              <a
                href="../documenti/vera-fede-ukr.pdf"
                download
                class="btn btn-download"
                ><i class="icon-download"></i> Scarica PDF</a
              >
            </div>
          </article>
          <article
            class="book-card"
            data-category="vita-cristiana"
            data-lang="rus"
          >
            <img
              src="../immagini/copertina-libro2.jpg"
              alt="Copertina: La Forza nella Prova"
              class="book-cover"
            />
            <div class="book-info">
              <h3>La Forza nella Prova</h3>
              <p class="book-author">Autore: [Nome Autore Esterno]</p>
              <p class="book-details">
                **Lingua:** Russo | **Formato:** e-Book/Esterno | **Categoria:**
                Vita Cristiana
              </p>
              <p class="book-description">
                Un incoraggiamento a perseverare attraverso le difficoltà con la
                speranza biblica.
              </p>
              <a
                href="[LINK ALLA PAGINA ESTERNA DEL LIBRO]"
                target="_blank"
                class="btn btn-external"
                ><i class="icon-link"></i> Leggi/Acquista</a
              >
            </div>
          </article>
          <article class="book-card" data-category="bambini" data-lang="ukr">
            <img
              src="../immagini/copertina-bambini.jpg"
              alt="Copertina: Gesù e i Bambini"
              class="book-cover"
            />
            <div class="book-info">
              <h3>Gesù e i Bambini: Storia Illustrata</h3>
              <p class="book-author">Ministero Bambini Chiesa [Nome]</p>
              <p class="book-details">
                **Lingua:** Ucraino | **Formato:** PDF | **Categoria:** Bambini
              </p>
              <p class="book-description">
                Un opuscolo colorato per insegnare ai più piccoli l'amore di
                Gesù.
              </p>
              <a
                href="../documenti/bambini-ukr.pdf"
                download
                class="btn btn-download"
                ><i class="icon-download"></i> Scarica PDF</a
              >
            </div>
          </article>
        </div>

        <div class="additional-info text-center mt-50">
          <p>
            Non hai trovato quello che cercavi? La nostra selezione viene
            aggiornata regolarmente. Contattaci per suggerimenti o richieste di
            materiali specifici.
          </p>
          <a href="../contatti.html" class="btn btn-secondary">Contattaci</a>
        </div>
      </section>
    </main>

    <footer id="main-footer"></footer>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const searchBar = document.getElementById("search-bar-books");
        const filterCategory = document.getElementById("filter-category");
        const filterLanguage = document.getElementById("filter-language");
        const booksList = document.getElementById("books-list");
        const bookCards = booksList.querySelectorAll(".book-card");

        function filterBooks() {
          const searchText = searchBar.value.toLowerCase();
          const selectedCategory = filterCategory.value;
          const selectedLanguage = filterLanguage.value;

          bookCards.forEach((card) => {
            const title = card.querySelector("h3").textContent.toLowerCase();
            const author = card
              .querySelector(".book-author")
              .textContent.toLowerCase();
            const category = card.getAttribute("data-category");
            const lang = card.getAttribute("data-lang");

            // 1. Filtro Ricerca Testuale
            const textMatch =
              title.includes(searchText) || author.includes(searchText);

            // 2. Filtro Categoria
            const categoryMatch =
              selectedCategory === "all" || category === selectedCategory;

            // 3. Filtro Lingua
            const languageMatch =
              selectedLanguage === "all" || lang === selectedLanguage;

            if (textMatch && categoryMatch && languageMatch) {
              card.style.display = "flex"; // Mostra la scheda
            } else {
              card.style.display = "none"; // Nascondi la scheda
            }
          });
        }

        // Aggiungi ascoltatori di eventi a tutti gli input di filtro
        searchBar.addEventListener("input", filterBooks);
        filterCategory.addEventListener("change", filterBooks);
        filterLanguage.addEventListener("change", filterBooks);
      });
    </script>
  </body>
</html>
